{% extends 'base.html' %}
{% block title %}العمليات{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3 class="mb-0">العمليات</h3>
  <a class="btn btn-sm btn-success" href="/transaction/add">تسجيل عملية</a>
</div>
<div class="card">
  <div class="table-responsive">
    <table class="table table-striped mb-0">
      <thead><tr><th>التاريخ</th><th>النوع</th><th>العملة</th><th>الكمية</th><th>قيمة محلية</th><th>الربح</th></tr></thead>
      <tbody>
        {% for t in transactions %}
          <tr>
            <td>{{ t.date.strftime('%Y-%m-%d %H:%M') }}</td>
            <td>
                  {% if t.type == 'buy' %}
                  <span class="badge bg-info">شراء</span>
                  {% else %}
                  <span class="badge bg-success">بيع</span>
                  {% endif %}
                </td>
            <td>{{ t.currency.code if t.currency else '-' }}</td>
            <td>{{ '{:,.2f}'.format(t.quantity) }}</td>
            <td>{{ '{:,.2f}'.format(t.total_value_local or 0) }}</td>
            <td>{{ '{:,.2f}'.format(t.profit or 0) }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
